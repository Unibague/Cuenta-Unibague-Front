(self["webpackChunkcuenta"]=self["webpackChunkcuenta"]||[]).push([[189],{189:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return f}});var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("MainLayout",[a("div",{staticClass:"h-full w-full flex flex-col items-center justify-center"},[a("div",{staticClass:"mb-10"},[a("h1",{staticClass:"text-3xl p-1"},[e._v(" Cambiar correo alterno ")]),a("p",{staticClass:"text-lg p-1"},[e._v(" Si deseas cambiar tu correo alterno ingresa el siguiente formulario ")])]),e.showForm?a("div",{staticClass:"p-5 border shadow rounded-lg bg-gray-100  md:w-1/2 lg:w-1/4"},[a("div",{staticClass:"text-left my-4"},[a("label",{staticClass:"font-semibold block my-2",attrs:{for:"user"}},[e._v("Usuario Unibagué")]),a("input",{directives:[{name:"model",rawName:"v-model",value:e.user.value,expression:"user.value"}],staticClass:"rounded border px-3 py-1 w-full",attrs:{type:"text",id:"user",placeholder:"Miguel.Mateus"},domProps:{value:e.user.value},on:{input:function(t){t.target.composing||e.$set(e.user,"value",t.target.value)}}})]),a("div",{staticClass:"text-left my-4"},[a("label",{staticClass:"font-semibold block my-2",attrs:{for:"role"}},[e._v("Eres un ...")]),a("select",{directives:[{name:"model",rawName:"v-model",value:e.role.value,expression:"role.value"}],staticClass:"rounded border px-3 py-1.5 w-full bg-white",attrs:{type:"date",id:"role"},on:{change:function(t){var a=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.$set(e.role,"value",t.target.multiple?a:a[0])}}},[a("option",{attrs:{value:"0"}},[e._v("Estudiante o egresado")]),a("option",{attrs:{value:"1"}},[e._v("Administrativo")])])]),a("div",{staticClass:"text-left mt-4"},[a("label",{staticClass:"font-semibold block my-2",attrs:{for:"password"}},[e._v("Contraseña actual")]),a("input",{directives:[{name:"model",rawName:"v-model",value:e.password.value,expression:"password.value"}],staticClass:"rounded border px-3 py-1 w-full",attrs:{type:"password",id:"password"},domProps:{value:e.password.value},on:{input:function(t){t.target.composing||e.$set(e.password,"value",t.target.value)}}})]),a("div",{staticClass:"text-left mt-4"},[a("label",{staticClass:"font-semibold block my-2",attrs:{for:"alternateEmail"}},[e._v("Nuevo correo alterno")]),a("input",{directives:[{name:"model",rawName:"v-model",value:e.alternateEmail.value,expression:"alternateEmail.value"}],staticClass:"rounded border px-3 py-1 w-full",attrs:{type:"text",id:"alternateEmail"},domProps:{value:e.alternateEmail.value},on:{input:function(t){t.target.composing||e.$set(e.alternateEmail,"value",t.target.value)}}}),a("p",{staticClass:"mt-3"},[a("span",{domProps:{innerHTML:e._s(e.getIcon("NOT_VALID_EMAIL","alternateEmail"))}}),e._v(" Debe ingresar un correo válido ")])]),a("div",{staticClass:"text-left mt-4"},[a("label",{staticClass:"font-semibold block my-2",attrs:{for:"confirmAlternateEmail"}},[e._v("Confirmacion correo alterno")]),a("input",{directives:[{name:"model",rawName:"v-model",value:e.confirmAlternateEmail.value,expression:"confirmAlternateEmail.value"}],staticClass:"rounded border px-3 py-1 w-full",attrs:{type:"text",id:"confirmAlternateEmail"},domProps:{value:e.confirmAlternateEmail.value},on:{input:function(t){t.target.composing||e.$set(e.confirmAlternateEmail,"value",t.target.value)}}}),""!==e.confirmAlternateEmail.value&&e.confirmAlternateEmail.errors.length>0?a("p",{staticClass:"mt-3"},[e._v(" Debe coincidir con el valor ingresado anteriormente ")]):e._e()]),a("div",{staticClass:"grid grid-cols-1 sm:grid-cols-2 gap-x-8 justify-between w-full mt-4 "},[a("div",{},[a("router-link",{staticClass:"rounded py-2 text-center w-full bg-gray-200 block",attrs:{to:{name:"home"}}},[e._v(" Ir atrás ")])],1),a("div",{},[a("button",{staticClass:"rounded py-2 text-center w-full text-white",class:{"cursor-not-allowed":!e.isFormValid||e.isProcessing},staticStyle:{"background-color":"#0f1f39"},attrs:{disabled:!e.isFormValid||e.isProcessing},on:{click:e.submitForm}},[e._v(" Cambiar ")])])])]):a("div",{staticClass:"p-5 border shadow rounded-lg bg-gray-100 md:w-1/2 lg:w-1/4"},[a("p",[e._v(" "+e._s(e.message)+" ")]),e.notFound?a("button",{staticClass:" rounded py-2 text-center mt-3 w-full text-white",staticStyle:{"background-color":"#0f1f39"},on:{click:function(t){e.showForm=!0}}},[e._v(" Ir atrás ")]):a("router-link",{staticClass:"rounded py-2 text-center mt-3 w-full text-white block",staticStyle:{"background-color":"#0f1f39"},attrs:{to:{name:"home"}}},[e._v(" Ir atrás ")])],1)])])},l=[],s=(a(6699),a(5952)),i=a(8987),o=a.n(i),n=a(6166),u=a.n(n),c={name:"ChangeAlternateEmailView",components:{MainLayout:s.Z},data(){return{isProcessing:!1,notFound:!1,showForm:!0,message:"Ha ocurrido un error. Por favor vuelve a intentarlo",user:{value:""},password:{value:""},role:{value:0},alternateEmail:{value:"",errors:[]},confirmAlternateEmail:{value:"",errors:[]}}},methods:{async submitForm(){if(!this.isFormValid)return;this.isProcessing=!0;const e="https://cuenta.unibague.edu.co:443",t=e+"/changeAlternateEmail",a={user:this.user.value,alternateEmail:this.alternateEmail.value,confirmAlternateEmail:this.confirmAlternateEmail.value,password:this.password.value,role:this.role.value};try{let e=await u().post(t,a);this.message=e.data.message,this.notFound=!1}catch(r){this.notFound=!0,this.message=r.response.data.message}this.isProcessing=!1,this.showForm=!1},getIcon(e,t){return 0===this[t].value.length?"":this[t].errors.includes(e)?'<i class="fa-solid fa-circle-xmark" style="color:red"></i>':'<i class="fa-solid fa-circle-check" style="color:green"></i>'}},watch:{"alternateEmail.value"(e,t){o()(e)?this.alternateEmail.errors=[]:this.alternateEmail.errors.includes("NOT_VALID_EMAIL")||this.alternateEmail.errors.push("NOT_VALID_EMAIL")},"confirmAlternateEmail.value"(e,t){e===this.alternateEmail.value?this.confirmAlternateEmail.errors=[]:this.confirmAlternateEmail.errors.includes("NOT_EQUAL_EMAIL")||this.confirmAlternateEmail.errors.push("NOT_EQUAL_EMAIL")}},computed:{isFormValid(){return 0===this.confirmAlternateEmail.errors.length&&0===this.alternateEmail.errors.length&&""!==this.user.value&&""!==this.confirmAlternateEmail.value&&""!==this.alternateEmail.value}}},m=c,d=a(1001),v=(0,d.Z)(m,r,l,!1,null,null,null),f=v.exports},1223:function(e,t,a){var r=a(5112),l=a(30),s=a(3070).f,i=r("unscopables"),o=Array.prototype;void 0==o[i]&&s(o,i,{configurable:!0,value:l(null)}),e.exports=function(e){o[i][e]=!0}},30:function(e,t,a){var r,l=a(9670),s=a(6048),i=a(748),o=a(3501),n=a(490),u=a(317),c=a(6200),m=">",d="<",v="prototype",f="script",p=c("IE_PROTO"),h=function(){},g=function(e){return d+f+m+e+d+"/"+f+m},w=function(e){e.write(g("")),e.close();var t=e.parentWindow.Object;return e=null,t},b=function(){var e,t=u("iframe"),a="java"+f+":";return t.style.display="none",n.appendChild(t),t.src=String(a),e=t.contentWindow.document,e.open(),e.write(g("document.F=Object")),e.close(),e.F},y=function(){try{r=new ActiveXObject("htmlfile")}catch(t){}y="undefined"!=typeof document?document.domain&&r?w(r):b():w(r);var e=i.length;while(e--)delete y[v][i[e]];return y()};o[p]=!0,e.exports=Object.create||function(e,t){var a;return null!==e?(h[v]=l(e),a=new h,h[v]=null,a[p]=e):a=y(),void 0===t?a:s.f(a,t)}},6048:function(e,t,a){var r=a(9781),l=a(3353),s=a(3070),i=a(9670),o=a(5656),n=a(1956);t.f=r&&!l?Object.defineProperties:function(e,t){i(e);var a,r=o(t),l=n(t),u=l.length,c=0;while(u>c)s.f(e,a=l[c++],r[a]);return e}},1956:function(e,t,a){var r=a(6324),l=a(748);e.exports=Object.keys||function(e){return r(e,l)}},6699:function(e,t,a){"use strict";var r=a(2109),l=a(1318).includes,s=a(7293),i=a(1223),o=s((function(){return!Array(1).includes()}));r({target:"Array",proto:!0,forced:o},{includes:function(e){return l(this,e,arguments.length>1?arguments[1]:void 0)}}),i("includes")},8987:function(e){const t=e=>!!e.match(/.+@.+\.\w{2,3}/);e.exports=t}}]);
//# sourceMappingURL=189.2bf6fd96.js.map